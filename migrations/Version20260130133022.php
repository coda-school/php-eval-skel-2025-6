<?php

declare(strict_types=1);

namespace DoctrineMigrations;

use Doctrine\DBAL\Schema\Schema;
use Doctrine\Migrations\AbstractMigration;

/**
 * Auto-generated Migration: Please modify to your needs!
 */
final class Version20260130133022 extends AbstractMigration
{
    public function getDescription(): string
    {
        return '';
    }

    public function up(Schema $schema): void
    {
        // this up() migration is auto-generated, please modify it to your needs
        $this->addSql('CREATE TABLE profile (id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL, username VARCHAR(30) NOT NULL, password VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, bio VARCHAR(255) DEFAULT \'\' NOT NULL, followers INT DEFAULT 0 NOT NULL, following INT DEFAULT 0 NOT NULL, profile_picture VARCHAR(255) DEFAULT NULL, PRIMARY KEY (id))');
        $this->addSql('CREATE UNIQUE INDEX UNIQ_8157AA0FF85E0677 ON profile (username)');
        $this->addSql('CREATE UNIQUE INDEX UNIQ_8157AA0FE7927C74 ON profile (email)');
        $this->addSql('CREATE TABLE profile_xlike (id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL, profile_id_id INT NOT NULL, ver_id_id INT NOT NULL, PRIMARY KEY (id))');
        $this->addSql('CREATE INDEX IDX_75735C6E88900185 ON profile_xlike (profile_id_id)');
        $this->addSql('CREATE INDEX IDX_75735C6EC2F21244 ON profile_xlike (ver_id_id)');
        $this->addSql('CREATE TABLE profile_xprofile (id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL, profile_one_id_id INT NOT NULL, profile_two_id_id INT NOT NULL, PRIMARY KEY (id))');
        $this->addSql('CREATE INDEX IDX_FFC6418C811DB103 ON profile_xprofile (profile_one_id_id)');
        $this->addSql('CREATE INDEX IDX_FFC6418C680C18E1 ON profile_xprofile (profile_two_id_id)');
        $this->addSql('CREATE TABLE response (id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL, content TEXT NOT NULL, ver_id_id INT NOT NULL, PRIMARY KEY (id))');
        $this->addSql('CREATE INDEX IDX_3E7B0BFBC2F21244 ON response (ver_id_id)');
        $this->addSql('CREATE TABLE ver (id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL, content TEXT NOT NULL, likes INT DEFAULT 0 NOT NULL, comments INT DEFAULT 0 NOT NULL, shares INT DEFAULT 0 NOT NULL, date TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, user_id_id INT NOT NULL, PRIMARY KEY (id))');
        $this->addSql('CREATE INDEX IDX_9BC42029D86650F ON ver (user_id_id)');
        $this->addSql('ALTER TABLE profile_xlike ADD CONSTRAINT FK_75735C6E88900185 FOREIGN KEY (profile_id_id) REFERENCES profile (id) NOT DEFERRABLE');
        $this->addSql('ALTER TABLE profile_xlike ADD CONSTRAINT FK_75735C6EC2F21244 FOREIGN KEY (ver_id_id) REFERENCES ver (id) NOT DEFERRABLE');
        $this->addSql('ALTER TABLE profile_xprofile ADD CONSTRAINT FK_FFC6418C811DB103 FOREIGN KEY (profile_one_id_id) REFERENCES profile (id) NOT DEFERRABLE');
        $this->addSql('ALTER TABLE profile_xprofile ADD CONSTRAINT FK_FFC6418C680C18E1 FOREIGN KEY (profile_two_id_id) REFERENCES profile (id) NOT DEFERRABLE');
        $this->addSql('ALTER TABLE response ADD CONSTRAINT FK_3E7B0BFBC2F21244 FOREIGN KEY (ver_id_id) REFERENCES ver (id) NOT DEFERRABLE');
        $this->addSql('ALTER TABLE ver ADD CONSTRAINT FK_9BC42029D86650F FOREIGN KEY (user_id_id) REFERENCES profile (id) NOT DEFERRABLE');
    }

    public function down(Schema $schema): void
    {
        // this down() migration is auto-generated, please modify it to your needs
        $this->addSql('ALTER TABLE profile_xlike DROP CONSTRAINT FK_75735C6E88900185');
        $this->addSql('ALTER TABLE profile_xlike DROP CONSTRAINT FK_75735C6EC2F21244');
        $this->addSql('ALTER TABLE profile_xprofile DROP CONSTRAINT FK_FFC6418C811DB103');
        $this->addSql('ALTER TABLE profile_xprofile DROP CONSTRAINT FK_FFC6418C680C18E1');
        $this->addSql('ALTER TABLE response DROP CONSTRAINT FK_3E7B0BFBC2F21244');
        $this->addSql('ALTER TABLE ver DROP CONSTRAINT FK_9BC42029D86650F');
        $this->addSql('DROP TABLE profile');
        $this->addSql('DROP TABLE profile_xlike');
        $this->addSql('DROP TABLE profile_xprofile');
        $this->addSql('DROP TABLE response');
        $this->addSql('DROP TABLE ver');
    }
}
